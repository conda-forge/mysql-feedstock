From fa5afa69d8f6c28b3ca07ea77768b864ad256453 Mon Sep 17 00:00:00 2001
From: Nehal J Wani <nehaljw.kkd1@gmail.com>
Date: Sat, 23 Oct 2021 10:31:04 -0400
Subject: [PATCH 15/21] Print number of lines in the file generated by
 create_def

---
 sql/CMakeLists.txt | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/sql/CMakeLists.txt b/sql/CMakeLists.txt
index 597464571b4..5aa17eb9d1e 100644
--- a/sql/CMakeLists.txt
+++ b/sql/CMakeLists.txt
@@ -1236,7 +1236,8 @@ IF(MSVC)
     DEPENDS create_def binlog binlogevents_static mysys mytime rpl rpl_replica sql_main strings vio
   )
   MY_ADD_CUSTOM_TARGET(GenMysqldDef ALL
-    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/mysqld.def)
+    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/mysqld.def
+    COMMAND $ENV{windir}/System32/find.exe /v /c \"\" ${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/mysqld.def)
 
   ADD_DEPENDENCIES(sql_main GenError)
   ADD_DEPENDENCIES(mysqld GenMysqldDef)
-- 
2.41.0

